(self.webpackChunk=self.webpackChunk||[]).push([[966],{25336:function(U,$,_){"use strict";_.d($,{ws:function(){return N}});var B=_(97857),T=_.n(B),u=_(64599),b=_.n(u),d=_(5574),I=_.n(d),y=_(15009),c=_.n(y),M=_(99289),i=_.n(M),g=_(12444),h=_.n(g),v=_(72004),C=_.n(v),w=_(9783),E=_.n(w),R=_(41728),P=_(67294),D=function(){function A(){h()(this,A),E()(this,"cache",new Map),E()(this,"CACHE_EXPIRE_TIME",5*60*1e3),E()(this,"pendingRequests",new Map)}return C()(A,[{key:"getEnum",value:function(){var s=i()(c()().mark(function r(a){var l,m,O;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(l=this.getFromCache(a),!l){n.next=3;break}return n.abrupt("return",l);case 3:if(!this.pendingRequests.has(a)){n.next=7;break}return n.next=6,this.pendingRequests.get(a);case 6:return n.abrupt("return",n.sent);case 7:return m=this.fetchEnum(a),this.pendingRequests.set(a,m),n.prev=9,n.next=12,m;case 12:return O=n.sent,this.pendingRequests.delete(a),n.abrupt("return",O);case 17:throw n.prev=17,n.t0=n.catch(9),this.pendingRequests.delete(a),n.t0;case 21:case"end":return n.stop()}},r,this,[[9,17]])}));function t(r){return s.apply(this,arguments)}return t}()},{key:"getEnums",value:function(){var s=i()(c()().mark(function r(a){var l=this,m,O;return c()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return m=a.map(function(L){return l.getEnum(L).then(function(j){return{name:L,data:j}})}),n.next=3,Promise.all(m);case 3:return O=n.sent,n.abrupt("return",O.reduce(function(L,j){var F=j.name,K=j.data;return L[F]=K,L},{}));case 5:case"end":return n.stop()}},r)}));function t(r){return s.apply(this,arguments)}return t}()},{key:"getFromCache",value:function(t){var r=this.cache.get(t);return r&&Date.now()-r.timestamp<this.CACHE_EXPIRE_TIME?r.data:(r&&this.cache.delete(t),null)}},{key:"fetchEnum",value:function(){var s=i()(c()().mark(function r(a){var l,m;return c()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,R.U2)("/admin/system/enum?name=".concat(a));case 2:if(l=p.sent,l.code===200){p.next=5;break}return p.abrupt("return",{});case 5:return m=l.data||{},this.cache.set(a,{data:m,timestamp:Date.now()}),p.abrupt("return",m);case 8:case"end":return p.stop()}},r,this)}));function t(r){return s.apply(this,arguments)}return t}()},{key:"isCached",value:function(t){var r=this.cache.get(t);return Date.now()-r.timestamp<this.CACHE_EXPIRE_TIME}},{key:"getCachedData",value:function(t){var r=this.cache.get(t),a=Date.now();if(r){var l=a-r.timestamp,m=l<this.CACHE_EXPIRE_TIME;if(m)return r.data}return null}},{key:"clearCache",value:function(t){t?this.cache.delete(t):this.cache.clear()}},{key:"getCacheInfo",value:function(){var t=this,r=[];return this.cache.forEach(function(a,l){r.push({name:l,timestamp:a.timestamp,expired:Date.now()-a.timestamp>=t.CACHE_EXPIRE_TIME})}),r}}]),A}(),e=new D,z=function(s){return e.getEnum(s)},S=function(s){return e.getEnums(s)},Q=function(s){var t=useState({}),r=_slicedToArray(t,2),a=r[0],l=r[1],m=useState(!0),O=_slicedToArray(m,2),p=O[0],n=O[1],L=useState(null),j=_slicedToArray(L,2),F=j[0],K=j[1];return useEffect(function(){if(!s){n(!1);return}var k=!0,Y=function(){var J=_asyncToGenerator(_regeneratorRuntime().mark(function G(){var W;return _regeneratorRuntime().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,n(!0),K(null),o.next=5,e.getEnum(s);case 5:W=o.sent,k&&l(W),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(0),k&&K(o.t0 instanceof Error?o.t0:new Error("\u83B7\u53D6\u679A\u4E3E\u6570\u636E\u5931\u8D25"));case 12:return o.prev=12,k&&n(!1),o.finish(12);case 15:case"end":return o.stop()}},G,null,[[0,9,12,15]])}));return function(){return J.apply(this,arguments)}}();return Y(),function(){k=!1}},[s]),[a,p,F]},N=function(s){var t=(0,P.useState)({}),r=I()(t,2),a=r[0],l=r[1],m=(0,P.useState)(!0),O=I()(m,2),p=O[0],n=O[1],L=(0,P.useState)(null),j=I()(L,2),F=j[0],K=j[1];return(0,P.useEffect)(function(){if(!s||s.length===0){n(!1),l({});return}var k=!0,Y=function(){var J=i()(c()().mark(function G(){var W,H,o,Z,X,V,q,x;return c()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:f.prev=0,K(null),W=[],H={},o=b()(s);try{for(o.s();!(Z=o.n()).done;)X=Z.value,V=e.getCachedData(X),V?H[X]=V:W.push(X)}catch(ee){o.e(ee)}finally{o.f()}if(!(W.length>0)){f.next=15;break}return n(!0),Object.keys(H).length>0&&k&&l(H),f.next=11,e.getEnums(W);case 11:q=f.sent,k&&(x=T()(T()({},H),q),l(x)),f.next=16;break;case 15:k&&l(H);case 16:f.next=21;break;case 18:f.prev=18,f.t0=f.catch(0),k&&K(f.t0 instanceof Error?f.t0:new Error("\u83B7\u53D6\u679A\u4E3E\u6570\u636E\u5931\u8D25"));case 21:return f.prev=21,k&&n(!1),f.finish(21);case 24:case"end":return f.stop()}},G,null,[[0,18,21,24]])}));return function(){return J.apply(this,arguments)}}();return Y(),function(){k=!1}},[JSON.stringify(s.sort())]),[a,p,F]}},63385:function(U,$,_){"use strict";_.d($,{Y:function(){return c}});var B=_(15009),T=_.n(B),u=_(97857),b=_.n(u),d=_(99289),I=_.n(d);function y(i,g){function h(v){for(var C in v){var w={order_by_field:C};return v[C]=="ascend"?w.order_by_type="asc":w.order_by_type="desc",w}return{}}return i.page=i.current,i.page_size=i.pageSize,delete i.current,delete i.pageSize,Object.assign(i,h(g))}function c(i,g,h){return M.apply(this,arguments)}function M(){return M=I()(T()().mark(function i(g,h,v){var C,w,E,R,P,D,e;return T()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return D=y(g,h),S.next=3,v({body:b()({},D)});case 3:return e=S.sent,S.abrupt("return",{data:(e==null||(C=e.data)===null||C===void 0?void 0:C.list)===void 0||(e==null||(w=e.data)===null||w===void 0?void 0:w.list)===null||(e==null||(E=e.data)===null||E===void 0||(E=E.list)===null||E===void 0?void 0:E.length)<=0?[]:e==null||(R=e.data)===null||R===void 0?void 0:R.list,success:(e==null?void 0:e.code)===200,total:e==null||(P=e.data)===null||P===void 0?void 0:P.total});case 5:case"end":return S.stop()}},i)})),M.apply(this,arguments)}},34484:function(U,$,_){"use strict";_.d($,{F:function(){return B}});function B(T){var u,b=T.split(" ",2);b[0].search("/")!=-1?u=(b[0]?b[0]:"").split("/",3):u=(b[0]?b[0]:"").split("-",3);var d=(b[1]?b[1]:"").split(":",3),I=new Date(parseInt(u[0],10)||0,(parseInt(u[1],10)||1)-1,parseInt(u[2],10)||0,parseInt(d[0],10)||0,parseInt(d[1],10)||0,parseInt(d[2],10)||0).getTime(),y=1e3*60,c=y*60,M=c*24,i=M*7,g=M*30,h=new Date().getTime(),v=h-I;if(!(v<0)){var C=v/y,w=v/c,E=v/M,R=v/i,P=v/g,D;if(P>=1&&P<=6)D=" "+parseInt(String(P))+"\u6708\u524D";else if(R>=1&&R<=3)D=" "+parseInt(String(R))+"\u5468\u524D";else if(E>=1&&E<=30)D=" "+parseInt(String(E))+"\u5929\u524D";else if(w>=1&&w<=23)D=" "+parseInt(String(w))+"\u5C0F\u65F6\u524D";else if(C>=1&&C<=59)D=" "+parseInt(String(C))+"\u5206\u949F\u524D";else if(v>=0&&v<=y)D="\u521A\u521A";else{var e=new Date;e.setTime(I);var z=e.getFullYear(),S=e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1,Q=e.getDate()<10?"0"+e.getDate():e.getDate(),N=e.getHours()<10?"0"+e.getHours():e.getHours(),A=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes(),s=e.getSeconds()<10?"0"+e.getSeconds():e.getSeconds();D=z+"-"+S+"-"+Q+" "+N+":"+A+":"+s}return D}}},64599:function(U,$,_){var B=_(96263);function T(u,b){var d=typeof Symbol!="undefined"&&u[Symbol.iterator]||u["@@iterator"];if(!d){if(Array.isArray(u)||(d=B(u))||b&&u&&typeof u.length=="number"){d&&(u=d);var I=0,y=function(){};return{s:y,n:function(){return I>=u.length?{done:!0}:{done:!1,value:u[I++]}},e:function(h){throw h},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var c=!0,M=!1,i;return{s:function(){d=d.call(u)},n:function(){var h=d.next();return c=h.done,h},e:function(h){M=!0,i=h},f:function(){try{!c&&d.return!=null&&d.return()}finally{if(M)throw i}}}}U.exports=T,U.exports.__esModule=!0,U.exports.default=U.exports}}]);
